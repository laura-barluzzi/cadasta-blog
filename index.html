<!doctype html>
<html>
    <head>
        <link rel="shortcut icon" href="favicon.ico">
        <link rel="icon" sizes="16x16 32x32 64x64" href="favicon.ico">

        <title>My blog</title>

        <link href="https://fonts.googleapis.com/css?family=Lobster|Shadows+Into+Light" rel="stylesheet">
        <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/js/materialize.min.js"></script>
        <link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/css/materialize.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/material-design-iconic-font/2.2.0/css/material-design-iconic-font.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/1.0.16/vue.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.3.5/marked.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.1.0/js.cookie.min.js"></script>
        <link href="rss.xml" type="application/atom+xml" rel="alternate" title="My blog ATOM Feed"/>
        <link rel="stylesheet" href="./style.css">
    </head>

    <body id="page" class="{{styling.backgroundColor}}">
        <div>
          <div v-cloak>

            <div id="nav-container" class="navbar-fixed" role="navigation">
              <nav class="{{styling.navbarColor}}">
                <div class="nav-wrapper">
                  <ul class="left">
                    <li>
                      <div id="filters">
                        <ul id="filters-dropdown" class="dropdown-content">
                          <li v-for="filter in filters"
                              v-bind:class="{'active': filterKey===filter.topic}"
                              class="dropdown-item filter">
                            <a v-on:click="filterKey=filter.topic"
                               href="#{{*filter.uid}}" role="button">
                              <span class="dropdown-label-text">{{*filter.name}}</span>
                              <span v-if="filter.totalPosts"
                                    class="badge">{{*filter.totalPosts}}</span>
                              <span v-if="filter.newPosts"
                                    class="badge new">{{*filter.newPosts}}</span>
                            </a>
                          </li>
                        </ul>
                        <a data-activates="filters-dropdown"
                           data-constrainwidth="false"
                           data-beloworigin="true"
                           data-alignment="right"
                           class="dropdown-button" href="#!" role="button"
                           id="filters-trigger">
                          <i class="icon filter zmdi zmdi-filter-list tooltipped"
                             data-tooltip="Filter"
                             data-delay="25"
                             data-position="right"></i>
                        </a>
                      </div>
                    </li>

                    <li>
                      <div id="search" class="search-form">
                        <div class="input-field">
                          <input v-model="searchKey"
                                 role="search"
                                 autocomplete="off"
                                 debounce="300"
                                 type="search"
                                 class="search form-control"
                                 id="search-input"/>
                          <label for="search-input">
                            <i class="icon search zmdi zmdi-search tooltipped"
                               data-tooltip="Search"
                               data-delay="25"
                               data-position="right"></i>
                          </label>
                        </div>
                      </div>
                    </li>
                  </ul>
                  <ul id="nav-mobile" class="right hide-on-med-and-down">
                    <li><a href="http://cadasta.org/" target="_blank">Cadasta</a></li>
                    <li><a href="https://www.gnome.org/outreachy/" target="_blank">Outreachy</a></li>
                    <li><a href="https://github.com/laura-barluzzi" target="_blank">My GitHub</a></li>
                  </ul>

                  <span class="brand-logo center"
                    v-if="meta.title">{{meta.title}}</span>

                  <ul class="right">
                    <li>
                      <a class="valign-wrapper modal-trigger" href="#about"
                         v-show="meta.about">
                        <i class="icon info zmdi zmdi-info tooltipped"
                             data-tooltip="What's this?"
                             data-delay="25"
                             data-position="left"></i>
                      </a>
                    </li>
                  </ul>
                </div>
              </nav>
            </div>

            <div id="about" class="modal">
              <div class="modal-content image-text-wrap">
                <span v-if="meta.about.avatar">
                  <img class="image-text-wrap-left" alt="Avatar"
                       v-bind:src="meta.about.avatar"></img>
                </span>
                <span v-if="meta.about.blurb">{{{*meta.about.blurb | marked}}}</span>
              </div>
              <div class="modal-footer">
                <a class="modal-action modal-close" href="#!" role="button">
                  <i class="modal-menu icon close zmdi zmdi-close"></i>
                </a>
              </div>
            </div>

            <div id="posts" role="main">
              <div class="container">
                <div class="row">
                  <div v-for="post in posts
                              | filterBy filterKey in 'topics'
                              | filterBy searchKey in 'title' 'summary'"
                       v-bind:class="{'deemphasize': selectedPostUid && selectedPostUid !== post.uid}"
                       transition="fade"
                       class="post card col s12 hoverable">
                    <div class="card-deselect">
                      <a v-if="selectedPostUid === post.uid"
                         v-on:click="selectedPostUid = ''"
                         href="#!" role="button">
                        <i class="icon close card-menu zmdi zmdi-close"></i>
                      </a>
                    </div>
                    <div class="card-block card-content">
                      <h4 class="card-title">{{*post.title}}</h4>
                      <p class="card-text">{{{*post.summary | marked}}}</p>
                    </div>
                    <div class="card-block card-action activator">
                      <a v-if="post.url"
                         class="card-link" href="{{*post.url}}">Origin</a>
                      <a v-on:click="selectedPostUid = post.uid"
                         class="card-link" href="#{{*post.uid}}">Permalink</a>
                      <i class="card-menu icon more zmdi zmdi-more-vert"></i>
                    </div>
                    <div class="card-reveal">
                      <h4 class="card-title">{{*post.title}}<i class="card-menu icon close zmdi zmdi-close"></i></h4>
                      <p class="card-text">
                        <ul>
                          <li>Date: {{post | displayDate}}</li>
                          <li>Topics: {{post | displayTopics}}</li>
                          <li>Type: {{*post.type}}</li>
                        </ul>
                      <p>
                    </div>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>

        <script src="./page.js"></script>
      </body>

</html>

<!-- -->
